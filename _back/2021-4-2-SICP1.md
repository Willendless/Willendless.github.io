---
layout: "post"
title: SICP（一）构造过程抽象
author: LJR
category: sicp
mathjax: true
---

## 1. 程序设计的基本元素

程序设计语言存在的意义是人能通过它们来描述计算过程。当计算过程逐步复杂化时，程序语言提供了如下机制构建复杂程序：

+ 基本表达形式：用于表示语言最关心的个体。
+ 组合的方法：从较简单的方法出发构造复合的元素的方法。
+ 抽象的方法：对复合元素命名，并将它们当作个体去操作。

### 1.1. 表达式、命名和环境

```shell
(* 2 2)
4
(define size 2)
(* size 5)
10
```
环境维护命名和值的关联关系。

+ 数的值就是它们所表示的值
+ 内部运算符的值就是能完成相应操作的机器序列
+ 名字就是环境中和其关联的对象

通过以下递归规则给出求值（*evaluation*）的模型：

+ 求值该组合式的各个子表达式
+ 将作为最左子表达式的值用作相应的实际参数

注意：该规则允许运算符本身也是复合表达式的情况，例如：

```shell
(define a-plus-abs-b
    ((if (b < 0) - +) a b)))
```

### 1.2. 过程定义

过程定义是一种更强大的抽象手段：对复合操作给出抽象的名字，之后就能使用名字将复合操作当作个体使用。其一般形式是`(define (<name> <formal parameters>) <body>)`

```shell
(define (square x) (* x x))
(square 21)
441
```

一个*不准确*的**代换模型**如下：

+ 将复合过程应用于实际参数，就是在将过程体中的每个形参用相应实参取代后，对这一过程体求值
  + 正则序求值：完全展开而后规约
  + 应用序求值（解释器实际使用）：先求值参数而后应用

### 1.3. 条件表达式

```shell
(cond (<p1> <e1>)
      (<p2> <e2>)
       <p3> <e3>)
```

例如求绝对值：

```shell
(define (abs x)
    (cond ((> x 0) x)
          ((= x 0) 0)
          ((< x 0) -x))
```

也可以使用if-else结构：

```shell
(if <predicate> <consequent> <alternative>)
```

例如求绝对值：

```shell
(define (abs x)
    (if (< x 0)
            (- x)
            x))
```

此外一些逻辑运算符如下：

```shell
and <e1> ... <en>
or <e1> ... <en>
not <e1>
```

#### 1.3.1. 示例：判断解释器使用的是正则还是应用序的方法

```shell
(define (p) (p))

(define (test x y)
    (if (= x 0)
        0
        y))
(test 0 (p))
```

对于正则序，程序会输出0。对于应用序（实际情况），死循环。

### 1.4. 采用牛顿法求平方根

+ 数学函数和计算机的计算过程之间有着是否能精确计算的差异
  + 数学描述的是“是什么”的问题 $\rightarrow$ 说明性描述
  + 计算过程描述的是“怎么做”的问题 $\rightarrow$ 行动性描述

牛顿逼近法：对x的平方根的值有了一个猜测y，那么就可以通过计算：$\frac{x+\frac{x}{y}}{2}$进一步精化该值。
